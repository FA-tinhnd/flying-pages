var e,t=function(e,t){var n=!1;return function(){n||(e.apply(null,arguments),n=!0,setTimeout(function(){n=!1},t))}},n=function(e,t,n){return Math.floor(Math.sqrt(Math.pow(t-(e.offsetLeft+e.offsetWidth/2),2)+Math.pow(n-(e.offsetTop+e.offsetHeight/2),2)))},o=(e=document.createElement("link")).relList&&e.relList.supports&&e.relList.supports("prefetch")?function(e){return new Promise(function(t,n){var o=document.createElement("link");o.rel="prefetch",o.href=e,o.onload=t,o.onerror=n,document.head.appendChild(o)})}:function(e){return fetch(e,{credentials:"include"})},r=window.IntersectionObserver&&"isIntersecting"in IntersectionObserverEntry.prototype,i=navigator.connection&&(navigator.connection.saveData||(navigator.connection.effectiveType||"").includes("2g"));function c(e){if(console.log("reached"),!i&&r){e=Object.assign({},{excludeKeywords:[],preloadMethod:"",proximity:200,throttle:3,preloadAllOnMobile:!0},{options:e});var c=new Set,a=new IntersectionObserver(function(e,t){e.forEach(function(e){return e.isIntersecting?c.add(e.target):c.delete(e.target)})});document.querySelectorAll("a[href^='"+window.location.origin+"']").forEach(function(t){new RegExp(e.excludeKeywords.join("|")).test(t.href)||a.observe(t)});var s=new Set,f=limitExecution(3),l=f[0],u=f[1];document.addEventListener("mousemove",t(function(t){[].concat(c).forEach(function(r){var i;n(r,t.pageX,t.pageY)<e.proximity&&(s.has(i=r.href)||(s.add(i),l(function(){o(i).then(u).catch(u)})),r.style.color="red")})},300))}}export{c as listen};
