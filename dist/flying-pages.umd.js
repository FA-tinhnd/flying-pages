!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.flyingPages={})}(this,function(e){var t,n=new Set,o=(t=document.createElement("link")).relList&&t.relList.supports&&t.relList.supports("prefetch")?function(e){return new Promise(function(t,n){var o=document.createElement("link");o.rel="prefetch",o.href=e,o.onload=t,o.onerror=n,document.head.appendChild(o)})}:function(e){return fetch(e,{credentials:"include"})},r=function(e,t,r){n.has(e)||(n.add(e),document.querySelector("a[href='"+e+"']").style.color="red",t(function(){o(e).then(r).catch(r)}))},i=window.IntersectionObserver&&"isIntersecting"in IntersectionObserverEntry.prototype,c=navigator.connection&&(navigator.connection.saveData||(navigator.connection.effectiveType||"").includes("2g")),a=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);e.listen=function(e){if(!c&&i){e=Object.assign({},{throttle:3,desktopPreloadMethod:"nearby-mouse",mobilePreloadMethod:"all-in-viewport",mouseProximity:200,excludeKeywords:[]},e);var t=new Set,n=function(e){e=e||1;var t=[],n=0;function o(){n<e&&t.length>0&&(t.shift()(),n++)}return[function(e){t.push(e)>1||o()},function(){n--,o()}]}(e.throttle),o=n[0],s=n[1],f=a?e.mobilePreloadMethod:e.desktopPreloadMethod,d=new IntersectionObserver(function(e,n){e.forEach(function(e){"all-in-viewport"===f&&e.isIntersecting&&r(e.target.href,o,s),"nearby-mouse"===f&&(e.isIntersecting?t.add(e.target):t.delete(e.target))})});document.querySelectorAll("a[href^='"+window.location.origin+"']").forEach(function(t){var n=new RegExp(e.excludeKeywords.join("|"));e.excludeKeywords.length&&n.test(t.href)||d.observe(t)}),"nearby-mouse"===f&&document.addEventListener("mousemove",(u=function(n){[].concat(t).forEach(function(t){var i,c;i=t,c=n.pageY,Math.floor(Math.sqrt(Math.pow(n.pageX-(i.offsetLeft+i.offsetWidth/2),2)+Math.pow(c-(i.offsetTop+i.offsetHeight/2),2)))<e.mouseProximity&&(r(t.href,o,s),t.style.color="red")})},l=!1,function(){l||(u.apply(null,arguments),l=!0,setTimeout(function(){l=!1},300))}))}var u,l}});
